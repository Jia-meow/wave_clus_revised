clear
clc
% Provide filenames and locations for all MCD files that should be
% processed together as one recording
% mcdFiles = {'C:\Users\wujia\Desktop\Troy\Wave_Clus UIC\20151111\Recording1\r1.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r2.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r3.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r4.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r5.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r6.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r7.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r8.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r9.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r10.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r11.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r12.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r13.mcd',...
% 'C:\Users\wujia\Desktop\Troy\Wave_Clas UIC\20151111\Recording1\r14.mcd'};

mcdFiles = {'D:\Troy\Wave_Clus UIC\20151111\Recording1\r1.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r2.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r3.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r4.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r5.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r6.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r7.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r8.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r9.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r10.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r11.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r12.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r13.mcd',...
    'D:\Troy\Wave_Clus UIC\20151111\Recording1\r14.mcd'};

% mcdFiles = {'D:\Troy\Wave_Clus UIC\20151111\Recording1\r1.mcd'};

% Name of folder to save everything
folderName = '20151111/Recording1';

% File name of mat filepower
fileName = 'r1';

%matFile = loader(sprintf('%s/%s.mat',folderName,fileName)); % Generate name of mat file
matFile = loader(sprintf('%s/%s.mat',folderName,fileName)); 

waveletSortMCDmultiple(mcdFiles,matFile); % Extract data from multiple MCD files and sort them all together

processData({matFile}) % Go through sorted data and save unit data and gaussian kernel density estimates of spike rates